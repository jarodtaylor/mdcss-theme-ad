(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _helpers = require('./helpers');

require('./examples');

document.addEventListener('DOMContentLoaded', function () {
	// Array.prototype.forEach.call(document.querySelectorAll('pre code[class^="lang"]'), function (code) {
	Array.prototype.forEach.call(document.querySelectorAll('pre code[class^="lang"]'), function (code) {
		// set pre, wrap, opts, and get meta data from code
		var pre = code.parentNode;
		var conf = {};
		var text = String(code.textContent || code.innerText || '');

		// get meta data from code class
		code.className.replace(/^lang-(\w+)(?::(\w+))?(?::(\w+))?/, function ($0, $1, $2, $3) {
			if ($3) return 'example:html:hidden';
			if ($2) return 'example:' + $2 + ',lang:' + $2;

			if ($1 === 'example') return 'example:html';

			return 'lang:' + $1;
		}).split(/\s*,\s*/).forEach(function (opt) {
			opt = opt.split(':');
			conf[opt.shift().trim()] = opt.join(':').trim();
		});

		code.removeAttribute('class');

		// conditionally create code examples
		if (conf.example) {
			var confExample = conf.example.split(':')[0];
			if (confExample in examples.lang) {
				examples.lang[confExample](pre, text, conf);
			}
		} else {
			var exampleCode = document.createElement('div');
			exampleCode.classList.add('example-code', 'clearfix');
			if (conf.lang === 'open') exampleCode.classList.add('example-code--is-open');
			var codeExampleToggle = exampleCode.appendChild(document.createElement('div'));
			codeExampleToggle.classList.add('example-code__toggle');
			pre.className = 'example-code__pre';
			var exampleWrapper = (0, _helpers.wrapEl)(pre, exampleCode);
		}
	});

	var exampleCode = document.querySelectorAll('.example-code');

	Array.prototype.map.call(exampleCode, function (el) {
		var toggler = el.querySelector('.example-code__toggle');
		toggler.addEventListener('click', function () {
			el.classList.toggle('example-code--is-open');
		});
	});
});

},{"./examples":2,"./helpers":3}],2:[function(require,module,exports){
'use strict';

examples.lang = {
	color: function color(pre, value) {
		var colors = pre.parentNode.insertBefore(document.createElement('div'), pre);
		var lines = value.trim().split(/\n+/);

		colors.className = 'colors';

		lines.map(parseLine).map(parseColor).forEach(colors.appendChild, colors);

		function parseLine(line) {
			line = line.trim();

			var color = {};
			var match = /@([^:]+):\s*(.+?)(?=\s+@|$)/g;
			var prop;

			while (prop = match.exec(line)) {
				color[prop[1]] = prop[2];
			}return color;
		}

		function parseColor(color) {
			var colorNode = document.createElement('div');
			var colorSwatch = document.createElement('div');
			var colorGrid = document.createElement('div');
			var colorHex = document.createElement('div');
			var colorVar = document.createElement('div');

			colorNode.classList.add('color');
			colorSwatch.classList.add('color-swatch');
			colorGrid.classList.add('grid');
			colorHex.classList.add('color-swatch__hex', 'grid__col');
			colorVar.classList.add('color-swatch__var', 'grid__col');

			colorSwatch.style.backgroundColor = color.color;

			colorNode.appendChild(colorSwatch);
			colorSwatch.appendChild(colorGrid);
			colorGrid.appendChild(colorHex);
			// colorGrid.appendChild(colorVar);
			colorHex.appendChild(document.createTextNode(color.color));

			Object.keys(color).filter(function (key) {
				return key !== 'color';
			}).forEach(function (key) {
				var varNode = colorGrid.appendChild(colorVar);

				// varNode.className = 'color__variable';

				varNode.setAttribute('data-name', key);

				varNode.appendChild(document.createTextNode(color[key]));
			});

			return colorNode;
		}

		function hex2rgb(hex) {
			var bigint = parseInt(hex.slice(1).replace(/^([0-9a-f])([0-9a-f])([0-9a-f])$/i, '$1$1$2$2$3$3'), 16);
			var r = bigint >> 16 & 255;
			var g = bigint >> 8 & 255;
			var b = bigint & 255;

			return [r, g, b];
		}

		function getRGB(color) {
			return (/^#/.test(color) ? hex2rgb(color) : color.replace(/[^\d,]+/g, '').split(/,/).map(function (part) {
					return part * 1;
				})
			);
		}

		function contrast(color) {
			var rgb = getRGB(color);
			var o = Math.round((parseInt(rgb[0]) * 299 + parseInt(rgb[1]) * 587 + parseInt(rgb[2]) * 114) / 1000);

			return o <= 180 ? '#ffffff' : '#000000';
		}
	},
	html: function html(pre, value, conf) {
		var codeExample = document.createElement('div');
		codeExample.classList.add('example-code', 'clearfix');
		if (conf.example === 'html:hidden') codeExample.classList.add('example-code--is-hidden');

		var wrap = pre.parentNode;
		pre.classList.add('example-code__pre');

		var preview = wrap.insertBefore(document.createElement('div'), pre);
		preview.className = 'docs-example clearfix';

		var resize = preview.appendChild(document.createElement('div'));
		resize.className = 'docs-resize';

		var resizeLeft = resize.appendChild(document.createElement('span'));
		resizeLeft.className = 'c-resize--left';

		var iframe = resize.appendChild(document.createElement('iframe'));
		iframe.className = 'docs-iframe';
		var style = iframe.style;

		var closestSection = iframe.closest('.sg-section');
		var sectionId = closestSection.id;

		var resizeRight = resize.appendChild(document.createElement('span'));
		resizeRight.className = 'c-resize--right';

		wrap.insertBefore(codeExample, pre);
		var codeExampleToggle = codeExample.appendChild(document.createElement('div'));
		codeExampleToggle.classList.add('example-code__toggle');
		codeExample.appendChild(pre);

		// get iframe dom
		var iwin = iframe.contentWindow;
		var idoc = iwin.document;

		// write example content to iframe
		idoc.open();

		var html = '<base' + (examples.base && ' href="' + examples.base + '"') + (examples.target && ' target="' + examples.target + '"') + '>';

		html += examples.css.map(function (css) {
			return '<link href="' + css + '" rel="stylesheet">';
		}).join('');

		html += examples.js.map(function (js) {
			return '<script src="' + js + '"></script>';
		}).join('');

		html += value;

		html += examples.bodyjs.map(function (js) {
			return '<script src="' + js + '"></script>';
		}).join('');

		idoc.write(html);

		idoc.documentElement.setAttribute('style', examples.htmlcss);
		idoc.documentElement.classList.add('sg-example', 'sg-example--' + sectionId);
		idoc.body.setAttribute('style', examples.bodycss);
		iframe.setAttribute('class', 'docs-iframe clearfix');

		idoc.close();

		if (conf.width) style.width = String(conf.width);

		// set iframe height based on content
		var documentElement = idoc.documentElement;
		var scrollHeight;

		function resizeFunc() {
			var currentScrollHeight = documentElement.scrollHeight;

			if (scrollHeight !== currentScrollHeight) {
				scrollHeight = currentScrollHeight;

				style.height = 0;

				style.height = documentElement.scrollHeight + (iframe.offsetHeight - iwin.innerHeight) + 'px';
			}
		}

		iwin.addEventListener('load', resizeFunc);

		resizeFunc();

		setInterval(resizeFunc, 334);
	}
};

},{}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
var wrapEl = function wrapEl(target, wrapper) {
  var targetParent = target.parentNode;
  targetParent.insertBefore(wrapper, target);
  wrapper.appendChild(target);
  return wrapper;
};

exports.wrapEl = wrapEl;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvamF2YXNjcmlwdHMvYWxsLmpzIiwic3JjL2phdmFzY3JpcHRzL2V4YW1wbGVzLmpzIiwic3JjL2phdmFzY3JpcHRzL2hlbHBlcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOztBQUNBOztBQUVBLFNBQVMsZ0JBQVQsQ0FBMEIsa0JBQTFCLEVBQThDLFlBQVk7QUFDekQ7QUFDQSxPQUFNLFNBQU4sQ0FBZ0IsT0FBaEIsQ0FBd0IsSUFBeEIsQ0FBNkIsU0FBUyxnQkFBVCxDQUEwQix5QkFBMUIsQ0FBN0IsRUFBbUYsVUFBVSxJQUFWLEVBQWdCO0FBQ2xHO0FBQ0EsTUFBSSxNQUFPLEtBQUssVUFBaEI7QUFDQSxNQUFJLE9BQU8sRUFBWDtBQUNBLE1BQUksT0FBTyxPQUFPLEtBQUssV0FBTCxJQUFvQixLQUFLLFNBQXpCLElBQXNDLEVBQTdDLENBQVg7O0FBRUE7QUFDQSxPQUFLLFNBQUwsQ0FBZSxPQUFmLENBQXVCLG1DQUF2QixFQUE0RCxVQUFVLEVBQVYsRUFBYyxFQUFkLEVBQWtCLEVBQWxCLEVBQXNCLEVBQXRCLEVBQTBCO0FBQ3JGLE9BQUksRUFBSixFQUFRLE9BQU8scUJBQVA7QUFDUixPQUFJLEVBQUosRUFBUSxPQUFPLGFBQWEsRUFBYixHQUFrQixRQUFsQixHQUE2QixFQUFwQzs7QUFFUixPQUFJLE9BQU8sU0FBWCxFQUFzQixPQUFPLGNBQVA7O0FBRXRCLFVBQU8sVUFBVSxFQUFqQjtBQUNBLEdBUEQsRUFPRyxLQVBILENBT1MsU0FQVCxFQU9vQixPQVBwQixDQU80QixVQUFVLEdBQVYsRUFBZTtBQUMxQyxTQUFNLElBQUksS0FBSixDQUFVLEdBQVYsQ0FBTjtBQUNBLFFBQUssSUFBSSxLQUFKLEdBQVksSUFBWixFQUFMLElBQTJCLElBQUksSUFBSixDQUFTLEdBQVQsRUFBYyxJQUFkLEVBQTNCO0FBQ0EsR0FWRDs7QUFZQSxPQUFLLGVB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QUFzQixNQUF0QixFQUE4QixVQUE5Qjs7QUFFRjs7QUFFQSxjQUFZLFVBQVosRUFBd0IsR0FBeEI7QUFDQTtBQXZLYyxDQUFoQjs7Ozs7Ozs7QUNBQSxJQUFNLFNBQVMsU0FBVCxNQUFTLENBQUMsTUFBRCxFQUFTLE9BQVQsRUFBcUI7QUFDbEMsTUFBSSxlQUFlLE9BQU8sVUFBMUI7QUFDQSxlQUFhLFlBQWIsQ0FBMEIsT0FBMUIsRUFBbUMsTUFBbkM7QUFDQSxVQUFRLFdBQVIsQ0FBb0IsTUFBcEI7QUFDQSxTQUFPLE9BQVA7QUFDRCxDQUxEOztRQU9TLE0sR0FBQSxNIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCB7IHdyYXBFbCB9IGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQgJy4vZXhhbXBsZXMnO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuXHQvLyBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3ByZSBjb2RlW2NsYXNzXj1cImxhbmdcIl0nKSwgZnVuY3Rpb24gKGNvZGUpIHtcblx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdwcmUgY29kZVtjbGFzc149XCJsYW5nXCJdJyksIGZ1bmN0aW9uIChjb2RlKSB7XG5cdFx0Ly8gc2V0IHByZSwgd3JhcCwgb3B0cywgYW5kIGdldCBtZXRhIGRhdGEgZnJvbSBjb2RlXG5cdFx0dmFyIHByZSAgPSBjb2RlLnBhcmVudE5vZGU7XG5cdFx0dmFyIGNvbmYgPSB7fTtcblx0XHR2YXIgdGV4dCA9IFN0cmluZyhjb2RlLnRleHRDb250ZW50IHx8IGNvZGUuaW5uZXJUZXh0IHx8ICcnKTtcblxuXHRcdC8vIGdldCBtZXRhIGRhdGEgZnJvbSBjb2RlIGNsYXNzXG5cdFx0Y29kZS5jbGFzc05hbWUucmVwbGFjZSgvXmxhbmctKFxcdyspKD86OihcXHcrKSk/KD86OihcXHcrKSk/LywgZnVuY3Rpb24gKCQwLCAkMSwgJDIsICQzKSB7XG5cdFx0XHRpZiAoJDMpIHJldHVybiAnZXhhbXBsZTpodG1sOmhpZGRlbic7XG5cdFx0XHRpZiAoJDIpIHJldHVybiAnZXhhbXBsZTonICsgJDIgKyAnLGxhbmc6JyArICQyO1xuXG5cdFx0XHRpZiAoJDEgPT09ICdleGFtcGxlJykgcmV0dXJuICdleGFtcGxlOmh0bWwnO1xuXG5cdFx0XHRyZXR1cm4gJ2xhbmc6JyArICQxO1xuXHRcdH0pLnNwbGl0KC9cXHMqLFxccyovKS5mb3JFYWNoKGZ1bmN0aW9uIChvcHQpIHtcblx0XHRcdG9wdCA9IG9wdC5zcGxpdCgnOicpO1xuXHRcdFx0Y29uZltvcHQuc2hpZnQoKS50cmltKCldID0gb3B0LmpvaW4oJzonKS50cmltKCk7XG5cdFx0fSk7XG5cblx0XHRjb2RlLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTtcblxuXHRcdC8vIGNvbmRpdGlvbmFsbHkgY3JlYXRlIGNvZGUgZXhhbXBsZXNcblx0XHRpZihjb25mLmV4YW1wbGUpIHtcblx0XHRcdHZhciBjb25mRXhhbXBsZSA9IGNvbmYuZXhhbXBsZS5zcGxpdCgnOicpWzBdO1xuXHRcdFx0aWYgKGNvbmZFeGFtcGxlIGluIGV4YW1wbGVzLmxhbmcpIHtcblx0XHRcdFx0ZXhhbXBsZXMubGFuZ1tjb25mRXhhbXBsZV0ocHJlLCB0ZXh0LCBjb25mKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIGV4YW1wbGVDb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRleGFtcGxlQ29kZS5jbGFzc0xpc3QuYWRkKCdleGFtcGxlLWNvZGUnLCAnY2xlYXJmaXgnKTtcblx0XHRcdGlmKGNvbmYubGFuZyA9PT0gJ29wZW4nKSBleGFtcGxlQ29kZS5jbGFzc0xpc3QuYWRkKCdleGFtcGxlLWNvZGUtLWlzLW9wZW4nKTtcblx0XHRcdHZhciBjb2RlRXhhbXBsZVRvZ2dsZSA9IGV4YW1wbGVDb2RlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcblx0XHRcdGNvZGVFeGFtcGxlVG9nZ2xlLmNsYXNzTGlzdC5hZGQoJ2V4YW1wbGUtY29kZV9fdG9nZ2xlJyk7XG5cdFx0XHRwcmUuY2xhc3NOYW1lID0gJ2V4YW1wbGUtY29kZV9fcHJlJztcblx0XHRcdHZhciBleGFtcGxlV3JhcHBlciA9IHdyYXBFbChwcmUsIGV4YW1wbGVDb2RlKTtcblx0XHR9XG5cdH0pO1xuXG5cdHZhciBleGFtcGxlQ29kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5leGFtcGxlLWNvZGUnKTtcblxuXHRBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoZXhhbXBsZUNvZGUsIGZ1bmN0aW9uKGVsKSB7XG5cdFx0dmFyIHRvZ2dsZXIgPSBlbC5xdWVyeVNlbGVjdG9yKCcuZXhhbXBsZS1jb2RlX190b2dnbGUnKTtcblx0XHR0b2dnbGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdGVsLmNsYXNzTGlzdC50b2dnbGUoJ2V4YW1wbGUtY29kZS0taXMtb3BlbicpO1xuXHRcdH0pO1xuXHR9KTtcbn0pO1xuIiwiZXhhbXBsZXMubGFuZyA9IHtcblx0Y29sb3I6IGZ1bmN0aW9uIChwcmUsIHZhbHVlKSB7XG5cdFx0dmFyIGNvbG9ycyA9IHByZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSwgcHJlKTtcblx0XHR2YXIgbGluZXMgPSB2YWx1ZS50cmltKCkuc3BsaXQoL1xcbisvKTtcblxuXHRcdGNvbG9ycy5jbGFzc05hbWUgPSAnY29sb3JzJztcblxuXHRcdGxpbmVzLm1hcChwYXJzZUxpbmUpLm1hcChwYXJzZUNvbG9yKS5mb3JFYWNoKGNvbG9ycy5hcHBlbmRDaGlsZCwgY29sb3JzKTtcblxuXHRcdGZ1bmN0aW9uIHBhcnNlTGluZShsaW5lKSB7XG5cdFx0XHRsaW5lID0gbGluZS50cmltKCk7XG5cblx0XHRcdHZhciBjb2xvciA9IHt9O1xuXHRcdFx0dmFyIG1hdGNoID0gL0AoW146XSspOlxccyooLis/KSg/PVxccytAfCQpL2c7XG5cdFx0XHR2YXIgcHJvcDtcblxuXHRcdFx0d2hpbGUgKHByb3AgPSBtYXRjaC5leGVjKGxpbmUpKSBjb2xvcltwcm9wWzFdXSA9IHByb3BbMl07XG5cblx0XHRcdHJldHVybiBjb2xvcjtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwYXJzZUNvbG9yKGNvbG9yKSB7XG5cdFx0XHR2YXIgY29sb3JOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHR2YXIgY29sb3JTd2F0Y2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdHZhciBjb2xvckdyaWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdHZhciBjb2xvckhleCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0dmFyIGNvbG9yVmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cblx0XHRcdGNvbG9yTm9kZS5jbGFzc0xpc3QuYWRkKCdjb2xvcicpO1xuXHRcdFx0Y29sb3JTd2F0Y2guY2xhc3NMaXN0LmFkZCgnY29sb3Itc3dhdGNoJyk7XG5cdFx0XHRjb2xvckdyaWQuY2xhc3NMaXN0LmFkZCgnZ3JpZCcpO1xuXHRcdFx0Y29sb3JIZXguY2xhc3NMaXN0LmFkZCgnY29sb3Itc3dhdGNoX19oZXgnLCAnZ3JpZF9fY29sJyk7XG5cdFx0XHRjb2xvclZhci5jbGFzc0xpc3QuYWRkKCdjb2xvci1zd2F0Y2hfX3ZhcicsICdncmlkX19jb2wnKTtcblxuXHRcdFx0Y29sb3JTd2F0Y2guc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3IuY29sb3I7XG5cblx0XHRcdGNvbG9yTm9kZS5hcHBlbmRDaGlsZChjb2xvclN3YXRjaCk7XG5cdFx0XHRjb2xvclN3YXRjaC5hcHBlbmRDaGlsZChjb2xvckdyaWQpO1xuXHRcdFx0Y29sb3JHcmlkLmFwcGVuZENoaWxkKGNvbG9ySGV4KTtcblx0XHRcdC8vIGNvbG9yR3JpZC5hcHBlbmRDaGlsZChjb2xvclZhcik7XG5cdFx0XHRjb2xvckhleC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb2xvci5jb2xvcikpO1xuXG5cblx0XHRcdE9iamVjdC5rZXlzKGNvbG9yKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5ICE9PSAnY29sb3InIH0pLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0XHR2YXIgdmFyTm9kZSA9IGNvbG9yR3JpZC5hcHBlbmRDaGlsZChjb2xvclZhcik7XG5cblx0XHRcdFx0Ly8gdmFyTm9kZS5jbGFzc05hbWUgPSAnY29sb3JfX3ZhcmlhYmxlJztcblxuXHRcdFx0XHR2YXJOb2RlLnNldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJywga2V5KTtcblxuXHRcdFx0XHR2YXJOb2RlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvbG9yW2tleV0pKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gY29sb3JOb2RlO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGhleDJyZ2IoaGV4KSB7XG5cdFx0XHR2YXIgYmlnaW50ID0gcGFyc2VJbnQoaGV4LnNsaWNlKDEpLnJlcGxhY2UoL14oWzAtOWEtZl0pKFswLTlhLWZdKShbMC05YS1mXSkkL2ksICckMSQxJDIkMiQzJDMnKSwgMTYpO1xuXHRcdFx0dmFyIHIgPSAoYmlnaW50ID4+IDE2KSAmIDI1NTtcblx0XHRcdHZhciBnID0gKGJpZ2ludCA+PiA4KSAmIDI1NTtcblx0XHRcdHZhciBiID0gYmlnaW50ICYgMjU1O1xuXG5cdFx0XHRyZXR1cm4gW3IsIGcsIGJdO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldFJHQihjb2xvcikge1xuXHRcdFx0cmV0dXJuIC9eIy8udGVzdChjb2xvcikgPyBoZXgycmdiKGNvbG9yKSA6IGNvbG9yLnJlcGxhY2UoL1teXFxkLF0rL2csICcnKS5zcGxpdCgvLC8pLm1hcChmdW5jdGlvbiAocGFydCkgeyByZXR1cm4gcGFydCAqIDE7IH0pO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNvbnRyYXN0KGNvbG9yKSB7XG5cdFx0XHR2YXIgcmdiID0gZ2V0UkdCKGNvbG9yKTtcblx0XHRcdHZhciBvICAgPSBNYXRoLnJvdW5kKCgocGFyc2VJbnQocmdiWzBdKSAqIDI5OSkgKyAocGFyc2VJbnQocmdiWzFdKSAqIDU4NykgKyAocGFyc2VJbnQocmdiWzJdKSAqIDExNCkpIC8gMTAwMCk7XG5cblx0XHRcdHJldHVybiBvIDw9IDE4MCA/ICcjZmZmZmZmJyA6ICcjMDAwMDAwJztcblx0XHR9XG5cdH0sXG5cdGh0bWw6IGZ1bmN0aW9uIChwcmUsIHZhbHVlLCBjb25mKSB7XG5cdFx0dmFyIGNvZGVFeGFtcGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0Y29kZUV4YW1wbGUuY2xhc3NMaXN0LmFkZCgnZXhhbXBsZS1jb2RlJywgJ2NsZWFyZml4Jyk7XG5cdFx0aWYoY29uZi5leGFtcGxlID09PSAnaHRtbDpoaWRkZW4nKSBjb2RlRXhhbXBsZS5jbGFzc0xpc3QuYWRkKCdleGFtcGxlLWNvZGUtLWlzLWhpZGRlbicpO1xuXG5cdFx0dmFyIHdyYXAgPSBwcmUucGFyZW50Tm9kZTtcbiAgICBwcmUuY2xhc3NMaXN0LmFkZCgnZXhhbXBsZS1jb2RlX19wcmUnKTtcblxuICAgIHZhciBwcmV2aWV3ID0gd3JhcC5pbnNlcnRCZWZvcmUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksIHByZSk7XG4gICAgcHJldmlldy5jbGFzc05hbWUgID0gJ2RvY3MtZXhhbXBsZSBjbGVhcmZpeCc7XG5cbiAgICB2YXIgcmVzaXplID0gcHJldmlldy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XG4gICAgcmVzaXplLmNsYXNzTmFtZSA9ICdkb2NzLXJlc2l6ZSc7XG5cblx0XHR2YXIgcmVzaXplTGVmdCA9IHJlc2l6ZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJykpO1xuICAgIHJlc2l6ZUxlZnQuY2xhc3NOYW1lID0gJ2MtcmVzaXplLS1sZWZ0JztcblxuICAgIHZhciBpZnJhbWUgPSByZXNpemUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJykpO1xuICAgIGlmcmFtZS5jbGFzc05hbWUgPSAnZG9jcy1pZnJhbWUnO1xuXHRcdHZhciBzdHlsZSAgPSBpZnJhbWUuc3R5bGU7XG5cblx0XHR2YXIgY2xvc2VzdFNlY3Rpb24gPSBpZnJhbWUuY2xvc2VzdCgnLnNnLXNlY3Rpb24nKTtcblx0XHR2YXIgc2VjdGlvbklkID0gY2xvc2VzdFNlY3Rpb24uaWQ7XG5cbiAgICB2YXIgcmVzaXplUmlnaHQgPSByZXNpemUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpKTtcbiAgICByZXNpemVSaWdodC5jbGFzc05hbWUgPSAnYy1yZXNpemUtLXJpZ2h0JztcblxuXHRcdHdyYXAuaW5zZXJ0QmVmb3JlKGNvZGVFeGFtcGxlLCBwcmUpO1xuXHRcdHZhciBjb2RlRXhhbXBsZVRvZ2dsZSA9IGNvZGVFeGFtcGxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcblx0XHRjb2RlRXhhbXBsZVRvZ2dsZS5jbGFzc0xpc3QuYWRkKCdleGFtcGxlLWNvZGVfX3RvZ2dsZScpO1xuXHRcdGNvZGVFeGFtcGxlLmFwcGVuZENoaWxkKHByZSk7XG5cblx0XHQvLyBnZXQgaWZyYW1lIGRvbVxuXHRcdHZhciBpd2luID0gaWZyYW1lLmNvbnRlbnRXaW5kb3c7XG5cdFx0dmFyIGlkb2MgPSBpd2luLmRvY3VtZW50O1xuXG5cdFx0Ly8gd3JpdGUgZXhhbXBsZSBjb250ZW50IHRvIGlmcmFtZVxuXHRcdGlkb2Mub3BlbigpO1xuXG5cdFx0dmFyIGh0bWwgPSAnPGJhc2UnICsgKFxuXHRcdFx0ZXhhbXBsZXMuYmFzZSAmJiAnIGhyZWY9XCInICsgZXhhbXBsZXMuYmFzZSArICdcIidcblx0XHQpICsgKFxuXHRcdFx0ZXhhbXBsZXMudGFyZ2V0ICYmICcgdGFyZ2V0PVwiJyArIGV4YW1wbGVzLnRhcmdldCArICdcIidcblx0XHQpICsgJz4nO1xuXG5cdFx0aHRtbCArPSBleGFtcGxlcy5jc3MubWFwKGZ1bmN0aW9uIChjc3MpIHtcblx0XHRcdHJldHVybiAnPGxpbmsgaHJlZj1cIicgKyBjc3MgKyAnXCIgcmVsPVwic3R5bGVzaGVldFwiPic7XG5cdFx0fSkuam9pbignJyk7XG5cblx0XHRodG1sICs9IGV4YW1wbGVzLmpzLm1hcChmdW5jdGlvbiAoanMpIHtcblx0XHRcdHJldHVybiAnPHNjcmlwdCBzcmM9XCInICsganMgKyAnXCI+PC9zY3JpcHQ+Jztcblx0XHR9KS5qb2luKCcnKTtcblxuXHRcdGh0bWwgKz0gdmFsdWU7XG5cblx0XHRodG1sICs9IGV4YW1wbGVzLmJvZHlqcy5tYXAoZnVuY3Rpb24gKGpzKSB7XG5cdFx0XHRyZXR1cm4gJzxzY3JpcHQgc3JjPVwiJyArIGpzICsgJ1wiPjwvc2NyaXB0Pic7XG5cdFx0fSkuam9pbignJyk7XG5cblx0XHRpZG9jLndyaXRlKGh0bWwpO1xuXG5cdFx0aWRvYy5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsIGV4YW1wbGVzLmh0bWxjc3MpO1xuXHRcdGlkb2MuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3NnLWV4YW1wbGUnLCAnc2ctZXhhbXBsZS0tJytzZWN0aW9uSWQpO1xuXHRcdGlkb2MuYm9keS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgZXhhbXBsZXMuYm9keWNzcyk7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZG9jcy1pZnJhbWUgY2xlYXJmaXgnKTtcblxuXHRcdGlkb2MuY2xvc2UoKTtcblxuXHRcdGlmIChjb25mLndpZHRoKSBzdHlsZS53aWR0aCA9IFN0cmluZyhjb25mLndpZHRoKTtcblxuXHRcdC8vIHNldCBpZnJhbWUgaGVpZ2h0IGJhc2VkIG9uIGNvbnRlbnRcblx0XHR2YXIgZG9jdW1lbnRFbGVtZW50ID0gaWRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdFx0dmFyIHNjcm9sbEhlaWdodDtcblxuXHRcdGZ1bmN0aW9uIHJlc2l6ZUZ1bmMoKSB7XG5cdFx0XHR2YXIgY3VycmVudFNjcm9sbEhlaWdodCA9IGRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQ7XG5cblx0XHRcdGlmIChzY3JvbGxIZWlnaHQgIT09IGN1cnJlbnRTY3JvbGxIZWlnaHQpIHtcblx0XHRcdFx0c2Nyb2xsSGVpZ2h0ID0gY3VycmVudFNjcm9sbEhlaWdodDtcblxuXHRcdFx0XHRzdHlsZS5oZWlnaHQgPSAwO1xuXG5cdFx0XHRcdHN0eWxlLmhlaWdodCA9IGRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgKyAoaWZyYW1lLm9mZnNldEhlaWdodCAtIGl3aW4uaW5uZXJIZWlnaHQpICsgJ3B4Jztcblx0XHRcdH1cblx0XHR9XG5cbiAgICBpd2luLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCByZXNpemVGdW5jKTtcblxuXHRcdHJlc2l6ZUZ1bmMoKTtcblxuXHRcdHNldEludGVydmFsKHJlc2l6ZUZ1bmMsIDMzNCk7XG5cdH1cbn07XG4iLCJjb25zdCB3cmFwRWwgPSAodGFyZ2V0LCB3cmFwcGVyKSA9PiB7XG4gIGxldCB0YXJnZXRQYXJlbnQgPSB0YXJnZXQucGFyZW50Tm9kZTtcbiAgdGFyZ2V0UGFyZW50Lmluc2VydEJlZm9yZSh3cmFwcGVyLCB0YXJnZXQpO1xuICB3cmFwcGVyLmFwcGVuZENoaWxkKHRhcmdldCk7XG4gIHJldHVybiB3cmFwcGVyO1xufVxuXG5leHBvcnQgeyB3cmFwRWwgfTtcbiJdfQ==
