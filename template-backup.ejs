<!doctype html>
<title><%- opts.title || themeopts.title %></title>
<meta charset="utf-8">
<link href="style.css" rel="stylesheet">
<script>examples=<%- JSON.stringify(opts.examples) %>;</script>
<script src="prism.js"></script>
<script src="script.js"></script>
<header>
	testingasdfa
	<nav>
		<!--<img src="<%- opts.logo || themeopts.logo %>" alt="Style Guide">-->
		<%

		function renderNavigation(children, depth) { %>
			<ul><%

				if (depth < 3) children.forEach(function (child) {
					if (child.name) {

						%>
						<li>
							<a href="#<%- child.name %>"><span><%- child.title %></span></a>
							<%

							if (child.children) renderNavigation(child.children, depth + 1);

							%>
						</li>
						<%

					}
				});

			%></ul>
		<% }

		renderNavigation(list, 1);
		%>
	</nav>
</header>
<main>
	<% sections(list, 2) %>
</main>


<%
function menu(children, depth) {
  %>
    <% if (depth < 3) children.sort(sort).forEach(function (child) {
      if (child.name) {
        if (depth < 2) {modifier = "heading";}
        if (depth > 1) {modifier = "item";}
        %>
        <a class="menu-<%- modifier %>" href="#<%- child.name %>"><span><%= child.title %></span></a>
        <% if (child.children) menu(child.children, depth + 1) %>
        <%
      }
    }); %>
  <%
}

function sections(children, depth) {
  depth = Math.max(Math.min(depth, 6), 1);

  children.sort(sort).forEach(function (child) {
    %>
    <section<% if (child.name) { %> id="<%= child.name %>"<% } %>>
      <% if (child.title) { %><%- '<h' + (depth - 1) + ' class="page-title">' %><%= child.title %><%- '</h' + (depth - 1) + '>' %><% } %>

      <div class="markdown-body">
        <%- child.content %>
        <% if (child.children) sections(child.children, depth + 1) %>
      </div>
    </section>
    <%
  });
}

function lastModified() {
  var now = new Date();

  var day = 'Sunday Monday Tuesday Wednesday Thursday Friday Saturday'.split(' ')[now.getDay()];

  var month = 'January February March April May June July August September October November December'.split(' ')[now.getMonth()];

  return day + ', ' + now.getDate() + ' ' + month + ' ' + now.getFullYear() + ' ' + now.getHours() + ':' + ('0' + now.getMinutes()).slice(-2);
}

function sort(childA, childB) {
  return (childA.order || 0) - (childB.order || 0);
}

%>
